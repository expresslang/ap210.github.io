
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
   <HEAD>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <TITLE>Integrated Resource: variational_representation_schema</TITLE>
   </HEAD>
   <body>
      <h2>Schema: variational_representation_schema</h2>
      <p><i>Source : ISO 10303-108</i></p><code><br><br><a name="variational_representation_schema">SCHEMA <b>variational_representation_schema</b>;</a><br><br></code><code>
         REFERENCE FROM 
         <A HREF="../../../data/resources/geometry_schema/geometry_schema.htm#geometry_schema">geometry_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-42<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/geometry_schema/geometry_schema.htm#geometry_schema.geometric_representation_item">geometric_representation_item</A>);
         <br><br></code><code>
         REFERENCE FROM 
         <A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema">representation_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-43<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.representation">representation</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.representation_item">representation_item</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.representation_relationship">representation_relationship</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.using_representations">using_representations</A>);
         <br><br></code><code>
         REFERENCE FROM 
         <A HREF="../../../data/resources/parameterization_schema/parameterization_schema.htm#parameterization_schema">parameterization_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-108<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/parameterization_schema/parameterization_schema.htm#parameterization_schema.bound_variational_parameter">bound_variational_parameter</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/parameterization_schema/parameterization_schema.htm#parameterization_schema.fixed_instance_attribute_set">fixed_instance_attribute_set</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/parameterization_schema/parameterization_schema.htm#parameterization_schema.instance_attribute_reference">instance_attribute_reference</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/parameterization_schema/parameterization_schema.htm#parameterization_schema.unbound_variational_parameter">unbound_variational_parameter</A>);
         <br><br></code><code>
         REFERENCE FROM 
         <A HREF="../../../data/resources/explicit_constraint_schema/explicit_constraint_schema.htm#explicit_constraint_schema">explicit_constraint_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-108<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/explicit_constraint_schema/explicit_constraint_schema.htm#explicit_constraint_schema.explicit_constraint">explicit_constraint</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/explicit_constraint_schema/explicit_constraint_schema.htm#explicit_constraint_schema.free_form_constraint">free_form_constraint</A>);
         <br><br></code><code>
         REFERENCE FROM 
         <A HREF="../../../data/resources/explicit_geometric_constraint_schema/explicit_geometric_constraint_schema.htm#explicit_geometric_constraint_schema">explicit_geometric_constraint_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-108<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/explicit_geometric_constraint_schema/explicit_geometric_constraint_schema.htm#explicit_geometric_constraint_schema.explicit_geometric_constraint">explicit_geometric_constraint</A>);
         <br><br></code><code>
         REFERENCE FROM 
         <A HREF="../../../data/resources/ISO13584_generic_expressions_schema/ISO13584_generic_expressions_schema.htm#iso13584_generic_expressions_schema">ISO13584_generic_expressions_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 13584-20<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/ISO13584_generic_expressions_schema/ISO13584_generic_expressions_schema.htm#iso13584_generic_expressions_schema.generic_variable">generic_variable</A>);
         <br><br></code><code><br><A NAME="variational_representation_schema.auxiliary_geometric_representation_item">ENTITY <b>auxiliary_geometric_representation_item</b></A><br>
         &nbsp;&nbsp;SUBTYPE OF (<A HREF="../../../data/resources/geometry_schema/geometry_schema.htm#geometry_schema.geometric_representation_item">geometric_representation_item</A>, <A HREF="#variational_representation_schema.variational_representation_item">variational_representation_item</A>);<br>
         
         END_ENTITY;<br></code><code><br><A NAME="variational_representation_schema.variational_current_representation_relationship">ENTITY <b>variational_current_representation_relationship</b></A><br>
         &nbsp;&nbsp;SUBTYPE OF (<A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.representation_relationship">representation_relationship</A>);<br>
         &nbsp;&nbsp;SELF\<A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.representation_relationship">representation_relationship</A>.<A NAME="variational_representation_schema.variational_current_representation_relationship.rep_1">rep_1 : </A><A HREF="#variational_representation_schema.variational_representation">variational_representation</A>;<br>
         &nbsp;&nbsp;<A NAME="variational_representation_schema.variational_current_representation_relationship.current_result">current_result : </A><A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.representation">representation</A>;<br>UNIQUE<br>
         &nbsp;&nbsp;<A NAME="variational_representation_schema.variational_current_representation_relationship.ur:ur1">UR1: </A>current_result;<br>WHERE<br>
         &nbsp;&nbsp;<A NAME="variational_representation_schema.variational_current_representation_relationship.wr:wr1">WR1: QUERY(q &lt;* SELF\representation_relationship.rep_1.items | NOT
            ('VARIATIONAL_REPRESENTATION_SCHEMA.VARIATIONAL_REPRESENTATION_ITEM'
            IN TYPEOF(q))) = SELF\representation_relationship.rep_2.items;</A><br>
         &nbsp;&nbsp;<A NAME="variational_representation_schema.variational_current_representation_relationship.wr:wr2">WR2: SELF\representation_relationship.rep_1.context_of_items :=:
            SELF\representation_relationship.rep_2.context_of_items;</A><br>
         &nbsp;&nbsp;<A NAME="variational_representation_schema.variational_current_representation_relationship.wr:wr3">WR3: SIZEOF(QUERY(q &lt;* SELF\representation_relationship.rep_2.items |
            'VARIATIONAL_REPRESENTATION_SCHEMA.VARIATIONAL_REPRESENTATION_ITEM' 
            IN TYPEOF(q))) = 0;</A><br>
         &nbsp;&nbsp;<A NAME="variational_representation_schema.variational_current_representation_relationship.wr:wr4">WR4: TYPEOF(SELF\representation_relationship.rep_1) -
            TYPEOF(SELF\representation_relationship.rep_2) =
            ['VARIATIONAL_REPRESENTATION_SCHEMA.VARIATIONAL_REPRESENTATION'];</A><br>
         &nbsp;&nbsp;<A NAME="variational_representation_schema.variational_current_representation_relationship.wr:wr5">WR5: current_result :=: SELF\representation_relationship.rep_2;</A><br>
         
         END_ENTITY;<br></code><code><br><A NAME="variational_representation_schema.variational_representation">ENTITY <b>variational_representation</b></A><br>
         &nbsp;&nbsp;SUBTYPE OF (<A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.representation">representation</A>);<br>INVERSE<br>
         &nbsp;&nbsp;<A NAME="variational_representation_schema.variational_representation.cm_link">cm_link : </A><A HREF="#variational_representation_schema.variational_current_representation_relationship">variational_current_representation_relationship</A> FOR rep_1;<br>WHERE<br>
         &nbsp;&nbsp;<A NAME="variational_representation_schema.variational_representation.wr:wr1">WR1: SIZEOF(QUERY(q &lt;* SELF\representation.items | 
            'VARIATIONAL_REPRESENTATION_SCHEMA.VARIATIONAL_REPRESENTATION_ITEM' 
            IN TYPEOF(q))) &gt; 0;</A><br>
         &nbsp;&nbsp;<A NAME="variational_representation_schema.variational_representation.wr:wr2">WR2: SIZEOF(QUERY(q &lt;* (SELF\representation.items - 
            cm_link.rep_2.items) | invalidate_vrep_item(q))) = 0;</A><br>
         
         END_ENTITY;<br></code><code><br><A NAME="variational_representation_schema.variational_representation_item">ENTITY <b>variational_representation_item</b></A><br>
         &nbsp;&nbsp;ABSTRACT SUPERTYPE
         
         OF&nbsp;(<A HREF="#variational_representation_schema.auxiliary_geometric_representation_item">auxiliary_geometric_representation_item</A>)<br>
         &nbsp;&nbsp;SUBTYPE OF (<A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.representation_item">representation_item</A>);<br>WHERE<br>
         &nbsp;&nbsp;<A NAME="variational_representation_schema.variational_representation_item.wr:wr1">WR1: SIZEOF(QUERY(q &lt;* using_representations(SELF) |
            NOT ('VARIATIONAL_REPRESENTATION_SCHEMA.VARIATIONAL_REPRESENTATION'  
            IN TYPEOF(q)))) = 0;</A><br>
         &nbsp;&nbsp;<A NAME="variational_representation_schema.variational_representation_item.wr:wr2">WR2: SIZEOF(QUERY(q &lt;* using_representations(SELF) |
            NOT (SELF IN q.items))) = 0;</A><br>
         
         END_ENTITY;<br></code><code><br><A NAME="variational_representation_schema.invalidate_vrep_item">FUNCTION <b>invalidate_vrep_item</b></A><br>&nbsp;(item : <A HREF="../../../data/resources/variational_representation_schema/variational_representation_schema.htm#variational_representation_schema.variational_representation_item">variational_representation_item</A>) : BOOLEAN;
         </code><pre>LOCAL
    reps    : SET[1:?] OF representation := using_representations(item);
    svri    : SET[1:?] OF variational_representation_item;
    iar     : instance_attribute_reference;
    i       : INTEGER;
    n       : INTEGER := HIINDEX(reps);
  END_LOCAL;

  IF ('PARAMETERIZATION_SCHEMA.BOUND_VARIATIONAL_PARAMETER' IN TYPEOF(item))
  THEN
    IF 'PARAMETERIZATION_SCHEMA.INSTANCE_ATTRIBUTE_REFERENCE' 
      IN TYPEOF(item\generic_variable.interpretation.semantics)
    THEN
      BEGIN
        iar := item\generic_variable.interpretation.semantics;
        IF (reps &lt;&gt; using_representations(iar.owning_instance))
        THEN
          RETURN(TRUE);
        END_IF;
      END;
    ELSE RETURN(TRUE); -- parameter not attached to an instance attribute
    END_IF;
  END_IF;

  IF ('PARAMETERIZATION_SCHEMA.UNBOUND_VARIATIONAL_PARAMETER' IN TYPEOF(item))
  THEN
    BEGIN 
      REPEAT i := 1 TO n;
        svri := QUERY(q &lt;* reps[i].items | 
          'EXPLICIT_CONSTRAINT_SCHEMA.FREE_FORM_CONSTRAINT' IN TYPEOF(q));
        IF SIZEOF(QUERY(r &lt;* svri | 
          item IN (r.reference_elements + r.constrained_elements))) = 0
        THEN 
          RETURN(TRUE);
        END_IF;
      END_REPEAT;
    END;
  END_IF;

  IF ('PARAMETERIZATION_SCHEMA.FIXED_INSTANCE_ATTRIBUTE_SET' 
    IN TYPEOF(item))
  THEN
    REPEAT i := 1 TO SIZEOF(item.fixed_attributes);
      IF (reps &lt;&gt; using_representations(item.fixed_attributes[i]))
      THEN
        RETURN(TRUE);
      END_IF;
    END_REPEAT;
  END_IF;

  IF ('EXPLICIT_CONSTRAINT_SCHEMA.EXPLICIT_CONSTRAINT' IN TYPEOF(item))
  THEN
    IF SIZEOF(QUERY(q &lt;* 
      (item.reference_elements + item.constrained_elements) |
      reps &lt;&gt; using_representations(q))) &gt; 0
    THEN
      RETURN(TRUE);
    END_IF;
  END_IF;

  IF ('VARIATIONAL_REPRESENTATION_SCHEMA.AUXILIARY_GEOMETRIC_REPRESENTATION_ITEM' IN TYPEOF(item))
  THEN
    BEGIN 
      REPEAT i := 1 TO n;
        svri := QUERY(q &lt;* reps[i].items | 
          'EXPLICIT_GEOMETRIC_CONSTRAINT_SCHEMA.EXPLICIT_GEOMETRIC_CONSTRAINT' IN TYPEOF(q));
        IF SIZEOF(QUERY(r &lt;* svri | 
          item IN r.reference_elements)) = 0
        THEN
          RETURN(TRUE);
        END_IF;
      END_REPEAT;
    END;
  END_IF;

  RETURN(FALSE);</pre><code>
         END_FUNCTION;
         </code><br><code><br>
         END_SCHEMA;&nbsp;&nbsp;--&nbsp;variational_representation_schema<br></code></body>
</HTML>