
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
   <HEAD>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <TITLE>Integrated Resource: aic_associative_draughting_elements</TITLE>
   </HEAD>
   <body>
      <h2>Schema: aic_associative_draughting_elements</h2>
      <p><i>Source : ISO 10303-520</i></p><code><br><br><a name="aic_associative_draughting_elements">SCHEMA <b>aic_associative_draughting_elements</b>;</a><br><br></code><code>
         USE FROM
         <A HREF="../../../data/resources/measure_schema/measure_schema.htm#measure_schema">measure_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-41<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/measure_schema/measure_schema.htm#measure_schema.derived_unit">derived_unit</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/measure_schema/measure_schema.htm#measure_schema.named_unit">named_unit</A>);
         <br><br></code><code>
         USE FROM
         <A HREF="../../../data/resources/product_property_definition_schema/product_property_definition_schema.htm#product_property_definition_schema">product_property_definition_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-41<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/product_property_definition_schema/product_property_definition_schema.htm#product_property_definition_schema.property_definition">property_definition</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/product_property_definition_schema/product_property_definition_schema.htm#product_property_definition_schema.shape_aspect">shape_aspect</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/product_property_definition_schema/product_property_definition_schema.htm#product_property_definition_schema.shape_aspect_relationship">shape_aspect_relationship</A>);
         <br><br></code><code>
         USE FROM
         <A HREF="../../../data/resources/product_property_representation_schema/product_property_representation_schema.htm#product_property_representation_schema">product_property_representation_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-41<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/product_property_representation_schema/product_property_representation_schema.htm#product_property_representation_schema.shape_definition_representation">shape_definition_representation</A>);
         <br><br></code><code>
         USE FROM
         <A HREF="../../../data/resources/geometry_schema/geometry_schema.htm#geometry_schema">geometry_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-42<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/geometry_schema/geometry_schema.htm#geometry_schema.axis2_placement">axis2_placement</A>);
         <br><br></code><code>
         USE FROM
         <A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema">representation_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-43<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.mapped_item">mapped_item</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.representation">representation</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.representation_item">representation_item</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.representation_map">representation_map</A>);
         <br><br></code><code>
         USE FROM
         <A HREF="../../../data/resources/qualified_measure_schema/qualified_measure_schema.htm#qualified_measure_schema">qualified_measure_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-45<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/qualified_measure_schema/qualified_measure_schema.htm#qualified_measure_schema.measure_representation_item">measure_representation_item</A>);
         <br><br></code><code>
         USE FROM
         <A HREF="../../../data/resources/presentation_appearance_schema/presentation_appearance_schema.htm#presentation_appearance_schema">presentation_appearance_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-46<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/presentation_appearance_schema/presentation_appearance_schema.htm#presentation_appearance_schema.curve_style">curve_style</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/presentation_appearance_schema/presentation_appearance_schema.htm#presentation_appearance_schema.styled_item">styled_item</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/presentation_appearance_schema/presentation_appearance_schema.htm#presentation_appearance_schema.invisibility_context">invisibility_context</A>);
         <br><br></code><code>
         USE FROM
         <A HREF="../../../data/resources/presentation_definition_schema/presentation_definition_schema.htm#presentation_definition_schema">presentation_definition_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-46<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/presentation_definition_schema/presentation_definition_schema.htm#presentation_definition_schema.annotation_curve_occurrence">annotation_curve_occurrence</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/presentation_definition_schema/presentation_definition_schema.htm#presentation_definition_schema.annotation_fill_area_occurrence">annotation_fill_area_occurrence</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/presentation_definition_schema/presentation_definition_schema.htm#presentation_definition_schema.annotation_occurrence">annotation_occurrence</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/presentation_definition_schema/presentation_definition_schema.htm#presentation_definition_schema.annotation_occurrence_relationship">annotation_occurrence_relationship</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/presentation_definition_schema/presentation_definition_schema.htm#presentation_definition_schema.annotation_symbol_occurrence">annotation_symbol_occurrence</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/presentation_definition_schema/presentation_definition_schema.htm#presentation_definition_schema.annotation_text_occurrence">annotation_text_occurrence</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/presentation_definition_schema/presentation_definition_schema.htm#presentation_definition_schema.text_literal">text_literal</A>);
         <br><br></code><code>
         USE FROM
         <A HREF="../../../data/resources/presentation_organization_schema/presentation_organization_schema.htm#presentation_organization_schema">presentation_organization_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-46<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/presentation_organization_schema/presentation_organization_schema.htm#presentation_organization_schema.camera_model">camera_model</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/presentation_organization_schema/presentation_organization_schema.htm#presentation_organization_schema.annotation_representation_select">annotation_representation_select</A>);
         <br><br></code><code>
         USE FROM
         <A HREF="../../../data/resources/shape_dimension_schema/shape_dimension_schema.htm#shape_dimension_schema">shape_dimension_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-47<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/shape_dimension_schema/shape_dimension_schema.htm#shape_dimension_schema.dimensional_characteristic_representation">dimensional_characteristic_representation</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/shape_dimension_schema/shape_dimension_schema.htm#shape_dimension_schema.shape_dimension_representation">shape_dimension_representation</A>);
         <br><br></code><code>
         USE FROM
         <A HREF="../../../data/resources/draughting_element_schema/draughting_element_schema.htm#draughting_element_schema">draughting_element_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-101<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/draughting_element_schema/draughting_element_schema.htm#draughting_element_schema.annotation_plane">annotation_plane</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/draughting_element_schema/draughting_element_schema.htm#draughting_element_schema.draughting_callout">draughting_callout</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/draughting_element_schema/draughting_element_schema.htm#draughting_element_schema.leader_curve">leader_curve</A>,<br>
         &nbsp;&nbsp;
         <A HREF="../../../data/resources/draughting_element_schema/draughting_element_schema.htm#draughting_element_schema.projection_curve">projection_curve</A>);
         <br><br></code><code>
         REFERENCE FROM 
         <A HREF="../../../data/resources/support_resource_schema/support_resource_schema.htm#support_resource_schema">support_resource_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-41<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/support_resource_schema/support_resource_schema.htm#support_resource_schema.bag_to_set">bag_to_set</A>);
         <br><br></code><code>
         REFERENCE FROM 
         <A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema">representation_schema</A>&nbsp;&nbsp;&nbsp;-- ISO 10303-43<br>&nbsp;&nbsp;(<A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.using_representations">using_representations</A>);
         <br><br></code><code><br><A NAME="aic_associative_draughting_elements.aade_annotation_representation_select">TYPE </A><b>aade_annotation_representation_select</b> =
         
         EXTENSIBLE
         
         GENERIC_ENTITY
         
         
         SELECT
         BASED_ON
         <A HREF="../../../data/resources/presentation_organization_schema/presentation_organization_schema.htm#presentation_organization_schema.annotation_representation_select">annotation_representation_select</A>
         WITH 
         <br>
         &nbsp;&nbsp;&nbsp;(<A HREF="#aic_associative_draughting_elements.draughting_model">draughting_model</A>);<br>
         END_TYPE; 
         <br></code><code><br><A NAME="aic_associative_draughting_elements.aade_invisibility_context">TYPE </A><b>aade_invisibility_context</b> =
         
         EXTENSIBLE
         
         GENERIC_ENTITY
         
         
         SELECT
         BASED_ON
         <A HREF="../../../data/resources/presentation_appearance_schema/presentation_appearance_schema.htm#presentation_appearance_schema.invisibility_context">invisibility_context</A>
         WITH 
         <br>
         &nbsp;&nbsp;&nbsp;(<A HREF="#aic_associative_draughting_elements.draughting_model">draughting_model</A>);<br>
         END_TYPE; 
         <br></code><code><br><A NAME="aic_associative_draughting_elements.draughting_model_item_select">TYPE </A><b>draughting_model_item_select</b> =
         
         
         SELECT<br>
         &nbsp;&nbsp;&nbsp;(<A HREF="../../../data/resources/geometry_schema/geometry_schema.htm#geometry_schema.axis2_placement">axis2_placement</A>, <br>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../../data/resources/presentation_organization_schema/presentation_organization_schema.htm#presentation_organization_schema.camera_model">camera_model</A>, <br>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../../data/resources/draughting_element_schema/draughting_element_schema.htm#draughting_element_schema.draughting_callout">draughting_callout</A>, <br>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.mapped_item">mapped_item</A>, <br>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../../data/resources/presentation_appearance_schema/presentation_appearance_schema.htm#presentation_appearance_schema.styled_item">styled_item</A>);<br>
         END_TYPE; 
         <br></code><code><br><A NAME="aic_associative_draughting_elements.annotation_occurrence_associativity">ENTITY <b>annotation_occurrence_associativity</b></A><br>
         &nbsp;&nbsp;SUBTYPE OF (<A HREF="../../../data/resources/presentation_definition_schema/presentation_definition_schema.htm#presentation_definition_schema.annotation_occurrence_relationship">annotation_occurrence_relationship</A>);<br>WHERE<br>
         &nbsp;&nbsp;<A NAME="aic_associative_draughting_elements.annotation_occurrence_associativity.wr:wr1">WR1: SIZEOF (TYPEOF (SELF.related_annotation_occurrence) *
            ['AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.ANNOTATION_FILL_AREA_OCCURRENCE',
            'AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.PROJECTION_CURVE',
            'AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.LEADER_CURVE']) = 1;</A><br>
         
         END_ENTITY;<br></code><code><br><A NAME="aic_associative_draughting_elements.dimension_text_associativity">ENTITY <b>dimension_text_associativity</b></A><br>
         &nbsp;&nbsp;SUBTYPE OF (<A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.mapped_item">mapped_item</A>, <A HREF="../../../data/resources/presentation_definition_schema/presentation_definition_schema.htm#presentation_definition_schema.text_literal">text_literal</A>);<br>WHERE<br>
         &nbsp;&nbsp;<A NAME="aic_associative_draughting_elements.dimension_text_associativity.wr:wr1">WR1: ('AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.SHAPE_DIMENSION_REPRESENTATION'
            IN TYPEOF (SELF\mapped_item.
            mapping_source.mapped_representation));</A><br>
         &nbsp;&nbsp;<A NAME="aic_associative_draughting_elements.dimension_text_associativity.wr:wr2">WR2: ('AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.DRAUGHTING_CALLOUT'
            IN TYPEOF (SELF\mapped_item.mapping_target));</A><br>
         &nbsp;&nbsp;<A NAME="aic_associative_draughting_elements.dimension_text_associativity.wr:wr3">WR3: SIZEOF (QUERY (ato &lt;* QUERY (si &lt;* 
            USEDIN (SELF, 'PRESENTATION_APPEARANCE_SCHEMA.STYLED_ITEM.ITEM') |
            ('AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.ANNOTATION_TEXT_OCCURRENCE'
            IN TYPEOF(si))) |
            NOT (SIZEOF( QUERY (dc &lt;*
            USEDIN (ato, 'DRAUGHTING_ELEMENT_SCHEMA.' +
            'DRAUGHTING_CALLOUT.CONTENTS') |
            ('AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.DRAUGHTING_CALLOUT'
            IN TYPEOF (dc)))
            * [SELF\mapped_item.mapping_target]) = 1)
            )) = 0;</A><br>
         
         END_ENTITY;<br></code><code><br><A NAME="aic_associative_draughting_elements.draughting_model">ENTITY <b>draughting_model</b></A><br>
         &nbsp;&nbsp;SUBTYPE OF (<A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.representation">representation</A>);<br>
         &nbsp;&nbsp;SELF\<A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.representation">representation</A>.<A NAME="aic_associative_draughting_elements.draughting_model.items">items : </A>SET[1:?] OF <A HREF="#aic_associative_draughting_elements.draughting_model_item_select">draughting_model_item_select</A>;<br>UNIQUE<br>
         &nbsp;&nbsp;<A NAME="aic_associative_draughting_elements.draughting_model.ur:ur1">UR1: </A>
         SELF\<A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.representation">representation</A>.name;<br>WHERE<br>
         &nbsp;&nbsp;<A NAME="aic_associative_draughting_elements.draughting_model.wr:wr1">WR1: SIZEOF (QUERY (mi &lt;* QUERY (it &lt;* SELF.items |
            ('AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.MAPPED_ITEM' IN TYPEOF(it))) |
            NOT (
            SIZEOF (['AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.SHAPE_REPRESENTATION',
            'AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.DRAUGHTING_MODEL'] *
            TYPEOF (mi\mapped_item.mapping_source.
            mapped_representation)) = 1
            ))) = 0;</A><br>
         &nbsp;&nbsp;<A NAME="aic_associative_draughting_elements.draughting_model.wr:wr2">WR2: SIZEOF (QUERY (smi &lt;* QUERY (si &lt;* QUERY (it &lt;* SELF.items |
            ('AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.STYLED_ITEM' IN TYPEOF(it))) |
            ('AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.MAPPED_ITEM' IN
            TYPEOF(si\styled_item.item))) |
            (NOT (('AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.SHAPE_REPRESENTATION' IN
            TYPEOF(smi\styled_item.item\mapped_item.
            mapping_source.mapped_representation))
            AND
            (SIZEOF (QUERY (sty &lt;* smi\styled_item.styles |
            (NOT (SIZEOF (QUERY (psa &lt;* sty.styles |
            (NOT ('AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.CURVE_STYLE' IN TYPEOF(psa))))) = 1
            )))) = 1)))
            )) = 0;</A><br>
         
         END_ENTITY;<br></code><code><br><A NAME="aic_associative_draughting_elements.shape_aspect_associativity">ENTITY <b>shape_aspect_associativity</b></A><br>
         &nbsp;&nbsp;SUBTYPE OF (<A HREF="../../../data/resources/product_property_definition_schema/product_property_definition_schema.htm#product_property_definition_schema.shape_aspect_relationship">shape_aspect_relationship</A>);<br>WHERE<br>
         &nbsp;&nbsp;<A NAME="aic_associative_draughting_elements.shape_aspect_associativity.wr:wr1">WR1: SELF.relating_shape_aspect.product_definitional;</A><br>
         &nbsp;&nbsp;<A NAME="aic_associative_draughting_elements.shape_aspect_associativity.wr:wr2">WR2: NOT (SELF.related_shape_aspect.product_definitional);</A><br>
         
         END_ENTITY;<br></code><code><br><A NAME="aic_associative_draughting_elements.check_associative_shape_aspects">FUNCTION <b>check_associative_shape_aspects</b></A><br>&nbsp;(sdr : <A HREF="../../../data/resources/product_property_representation_schema/product_property_representation_schema.htm#product_property_representation_schema.shape_definition_representation">shape_definition_representation</A>) : BOOLEAN;
         </code><pre>LOCAL
      sr1, sr2 : SET OF representation;
      dm, pv   : SET OF representation;
    END_LOCAL;
    -- Check if the representation contains only two items
    IF (SIZEOF (sdr.used_representation.items) &lt;&gt; 2) THEN
      RETURN (FALSE);
    END_IF;
    -- Find the representations that use each item
    sr1 := using_representations(sdr.used_representation.items[1]);
    sr2 := using_representations(sdr.used_representation.items[2]);
    -- Find the representations in which item 1 representations are mapped
    REPEAT i := 1 TO HIINDEX(sr1);
      dm := representations_mapped_into(sr1[i]);
      REPEAT j := 1 TO HIINDEX(dm);
        IF ('AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.DRAUGHTING_MODEL' IN TYPEOF(dm[j]))
        THEN
          IF (dm[j] IN sr2) THEN RETURN (TRUE);
          END_IF;
          -- Find the views that the draughting model is mapped into
          pv := representations_mapped_into(dm[j]);
          REPEAT k := 1 TO HIINDEX(pv);
            IF ('AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.PRESENTATION_VIEW' IN TYPEOF(pv[k]))
            THEN
              IF (pv[k] IN sr2) THEN RETURN (TRUE);
              END_IF;
            END_IF;
          END_REPEAT;
        END_IF;
      END_REPEAT;
    END_REPEAT;
    -- Find the representations in which item 2 representations are mapped
    REPEAT i := 1 TO HIINDEX(sr2);
      dm := representations_mapped_into(sr2[i]);
      REPEAT j := 1 TO HIINDEX(dm);
        IF ('AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.DRAUGHTING_MODEL' IN TYPEOF(dm[j]))
        THEN
          IF (dm[j] IN sr1) THEN RETURN (TRUE);
          END_IF;
          -- Find the views that the draughting model is mapped into
          pv := representations_mapped_into(dm[j]);
          REPEAT k := 1 TO HIINDEX(pv);
            IF ('AIC_ASSOCIATIVE_DRAUGHTING_ELEMENTS.PRESENTATION_VIEW' IN TYPEOF(pv[k]))
            THEN
              IF (pv[k] IN sr1) THEN RETURN (TRUE);
              END_IF;
            END_IF;
          END_REPEAT;
        END_IF;
      END_REPEAT;
    END_REPEAT;
    RETURN(FALSE);</pre><code>
         END_FUNCTION;
         </code><br><code><br><A NAME="aic_associative_draughting_elements.representations_mapped_into">FUNCTION <b>representations_mapped_into</b></A><br>&nbsp;(rep : <A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.representation">representation</A>) : SET[0:?] OF <A HREF="../../../data/resources/representation_schema/representation_schema.htm#representation_schema.representation">representation</A>;
         </code><pre>LOCAL
      results : SET OF representation := [];
      rm      : SET OF representation_map;
      mi      : SET OF mapped_item := [];
    END_LOCAL;
    -- Find set of representation_maps which specify the representation
    rm := bag_to_set(USEDIN(rep, 'REPRESENTATION_SCHEMA.' +
                      'REPRESENTATION_MAP.MAPPED_REPRESENTATION'));
    -- Find the set of mapped_items that use each representation_map
    REPEAT i := 1 TO HIINDEX(rm);
      mi := mi + rm[i].map_usage;
    END_REPEAT;
    -- Find the set of representations that use each mapped_item
    REPEAT j := 1 TO HIINDEX(mi);
      results := results + USEDIN(mi[j],'REPRESENTATION_SCHEMA.' +
                                        'REPRESENTATION.ITEMS');
    END_REPEAT;
    RETURN(results);</pre><code>
         END_FUNCTION;
         </code><br><code><br>
         END_SCHEMA;&nbsp;&nbsp;--&nbsp;aic_associative_draughting_elements<br></code></body>
</HTML>